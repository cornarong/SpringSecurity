

## Authentication (인증 주체)
. 당신이 누구인지 증명하는 것
. 사용자의 인증정보를 저장하는 토큰 개념
. 인증 시 id와 password를 담고 인증검증을 위해 전달되어서 사용된다.
. 인증 후 최종 인증결과 (user 객체, 권한정보)를 담고 SecurityContext에 저장되어 전역적으로 참조가 가능하다.
    * Authentication authentication = SecurityContextHolder.getContext().getAuthentication()
* Interface구조
    1) principal : 사용자 아이디 혹은 User객체를 저장
    2) credentials : 사용자 비밀번호
    3) authorities : 인증된 사용자의 권한 목록
    4) details : 인증 부가 정보 (추가적인 인증작업을 할 수 있음)
    5) Authenticated : 인증 여부

## SecurityContext (SecurityContext > Authentication > UserInfo)
. Authentication객체가 저장되는 '보관소'로 필요시 언제든지 Authentication객체를 꺼내어 쓸 수 있도록 제공되는 클래스이다.
. ThreadLocal에 저장되어 '아무 곳에서나 참조가 가능'하도록 설계되어 있다.
    + ThreadLocal이란? : 각각의 스레드마다 고유하게 할당된 저장소이다. 스레드끼리 공유가 되지않기 떄문에 안전하다.
                        -> '각각의 스레드에 SecurityContext가 저장된다.'
. 인증이 완료되면 HttpSession에 저장되어 어플리케이션 전반에 걸쳐 전역적인 참조가 가능하다.

## SecurityContextHolder (SecurityContext를 감싸고 있는 클래스)
. SecurityContext 객체 저장 방식 3가지
    . MODE_THREADLOCAL : 스레드당 SecurityContext 객체를 할당한다. (기본값)
    . MODE_INHERITABLETHREADLOCAL : 메인(부모) 스레드와 자식 스레드에 관하여 동일한 SecurityContext를 유지한다.
    . MODE_GLOBAL : 응용 프로그램에서 단 하나의 SecurityContext를 저장한다. (static변수 한곳에 저장해서 사용한다.)
. SecurityContextHolder.clearContext() : SecurityContext 기존 정보 초기화

-> 인증된 사용자의 객체 사용 시 : Authentication authentication = SecurityContextHolder.getContext().getAuthentication();